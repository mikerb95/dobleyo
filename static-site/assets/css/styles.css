/* Base */
:root{ --coffee:#251a14; --coffee-rgb:37,26,20; --cream:#f7f3ef; --dark:#1f1f1f; --muted:#777 }
:root{ --page-width: 1100px; --page-gutter: 2rem; --bg: var(--cream); --fg: #1f2937; --card:#ffffff; --border:#e6e6e6; --muted-fg:#6b7280; --footer-bg:#f3eee7; --footer-fg:#5a463a; --accent:#c67b4e; --accent-contrast:#ffffff; --price:#251a14 }
/* Dark theme tokens override via class on <html> â€” tuned for comfortable contrast */
html.theme-dark{
  --bg:#0e0f10;           /* page background */
  --fg:#e6e7eb;           /* primary text */
  --card:#16181b;         /* surfaces/cards */
  --border:#2a2f36;       /* subtle outlines */
  --muted-fg:#a0a8b3;     /* secondary text */
  --footer-bg:#101112;    /* footer background */
  --footer-fg:#cbb7aa;    /* warm footer text */
  --accent:#e08f55;       /* accent on dark */
  --price:#f2b07d;        /* price on dark */
}
*{ box-sizing:border-box }
html,body{ margin:0; padding:0 }
body{ font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif; color:var(--fg); background:var(--bg) }
/* Override Tailwind body classes in dark theme */
html.theme-dark body.bg-cream{ background-color: var(--bg) !important; }
html.theme-dark body.text-ink{ color: var(--fg) !important; }
img{ max-width:100%; display:block }
.container{ width:min(var(--page-width),calc(100% - var(--page-gutter))); margin-inline:auto; padding-left:1.25rem; padding-right:1.25rem }

/* Topbar */
.topbar{ position:fixed; top:0; left:0; right:0; z-index:75; background:var(--dark); color:#fff; font-size:.875rem; opacity:1 !important; box-shadow:0 2px 8px rgba(0,0,0,.18) }
.topbar .container{ display:flex; align-items:center; justify-content:space-between; padding:.5rem 0 }
.topbar .topbar-close{ background:transparent; border:0; color:#fff; font-size:1.2rem; cursor:pointer }

/* Header (floating navbar) */
.site-header{ position:fixed; top: var(--header-top, 12px); left:0; right:0; z-index:60; background:transparent; border-bottom:0; }
.site-header .container{ position:relative; overflow:hidden; display:flex; align-items:center; justify-content:space-between; padding:1.5rem 1.25rem; width:min(var(--page-width),calc(100% - var(--page-gutter))); margin-inline:auto; background:rgba(255,255,255,.88); backdrop-filter:saturate(140%) blur(10px); border:1px solid rgba(0,0,0,.08); border-radius:1rem; box-shadow:0 18px 44px rgba(0,0,0,.10); color:var(--fg) }
/* Wooden subtle texture */
.site-header .container::before{ content:""; position:absolute; inset:0; z-index:0; pointer-events:none; opacity:.22; mix-blend-mode:soft-light; background:
  radial-gradient(1000px 60px at -200px 0, rgba(255,255,255,.05), transparent 60%),
  radial-gradient(1000px 60px at 120% 100%, rgba(0,0,0,.09), transparent 60%),
  repeating-linear-gradient(100deg, rgba(255,255,255,.05) 0 6px, rgba(0,0,0,.06) 6px 12px);
}
/* ensure content on top */
.site-header .brand, .site-header .nav, .site-header .actions{ position:relative; z-index:2 }
.brand{ display:flex; align-items:center; gap:.5rem; color:var(--coffee); text-decoration:none; font-weight:700 }
/* Brand on light header */
.site-header .brand{ color:var(--coffee) }
/* Remove any background fill behind the logo and blend whites out */
.site-header .brand{ background: transparent !important }
.site-header .brand img{ background: transparent !important; mix-blend-mode: multiply }
/* Ensure logo image keeps consistent height (desktop default) */
.brand img{ height:36px; width:auto; display:block }
/* Slight transparency and subtle shadow for blending over translucent header */
.site-header .brand img{ opacity:.92; filter: drop-shadow(0 1px 0 rgba(255,255,255,.15)) drop-shadow(0 2px 6px rgba(0,0,0,.25)); transition: opacity .2s ease, transform .2s ease }
.site-header .brand:hover img{ opacity:1; transform: scale(1.02) }
html.theme-dark .site-header .brand img{ opacity:.96 }
.nav{ display:flex; gap:1rem }
.nav a{ color:var(--dark); text-decoration:none; padding:.25rem .5rem; border-radius:.375rem }
.nav a.active, .nav a:hover{ background:#fff; box-shadow:0 1px 0 rgba(0,0,0,.05) }
/* Header-specific link overrides for light header */
.site-header .nav a{ color:var(--fg) }
.site-header .nav a.active, .site-header .nav a:hover{ background:rgba(0,0,0,.06); box-shadow:none }
.actions{ display:flex; align-items:center; gap:.5rem }
.icon-btn{ background:#fff; border:1px solid #eee; padding:.4rem .6rem; border-radius:.375rem; cursor:pointer; text-decoration:none; color:var(--dark); display:inline-flex; align-items:center; gap:.25rem }
.icon-btn.active{ border-color:var(--coffee) }
.badge{ background:var(--coffee); color:#fff; font-size:.7rem; padding:.05rem .35rem; border-radius:999px; margin-left:.25rem }
.hamburger{ display:none }
/* Header-specific buttons */
.site-header .icon-btn{ background:#ffffff; border-color:#e5e7eb; color:var(--fg) }
.site-header .icon-btn:hover{ background:#f9fafb }

/* Coffee beans layer inside header */
.nav-beans{ position:absolute; inset:0; z-index:1; pointer-events:none; opacity:.26; transition: opacity .25s ease }
.beans-active .nav-beans{ opacity:.34 }
.nav-beans .bean{ position:absolute; width:var(--bean-size, 46px); height:auto; filter: drop-shadow(0 2px 2px rgba(0,0,0,.22)) saturate(110%) brightness(1.05);
  transform: translate(calc(var(--dx, 0px) * var(--fx, 1)), calc(var(--dy, 0px) * var(--fy, 1))) rotate(var(--rot, 0deg)) scale(var(--s, 1));
  transition: transform .6s cubic-bezier(.2,.8,.2,1);
}
@media (max-width: 900px){ .nav-beans{ display:none } }

/* Mobile menu */
.mobile-menu{ display:none; flex-direction:column; gap:.5rem; padding:.5rem 1rem; border:1px solid var(--border); background:var(--card); border-radius:.5rem; width:min(var(--page-width),calc(100% - var(--page-gutter))); margin: .5rem auto 0; position:relative; z-index:59 }
.mobile-menu a{ text-decoration:none; color:var(--fg) }

/* Hero */
.hero{ position:relative; padding:4rem 0; text-align:center; isolation:isolate }
/* Above-the-fold background for medium+ viewports */
@media (min-width: 768px){
  .hero{ padding:6rem 0; min-height: calc(85vh - var(--page-offset-top, 136px)) }
  .hero::before{
    content:""; position:absolute; 
  /* extend upward from top of page to cover topbar+header area */
  top: calc(-1 * var(--page-offset-top, 136px));
    bottom:0; left:50%; width:100vw; transform:translateX(-50%);
    background-image: url('../img/above-the-fold/landscape1.png');
    background-size: cover; background-position: center; background-repeat: no-repeat;
    z-index:-1; opacity:.95;
  }
}
/* Slight dark overlay in dark theme to improve text contrast */
@media (min-width: 768px){
  html.theme-dark .hero::before{
    background-image:
      linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.25)),
      url('../img/above-the-fold/landscape1.png');
  }
}
.btn{ background:var(--accent); color:var(--accent-contrast); padding:.6rem 1rem; border-radius:.375rem; text-decoration:none; display:inline-block; border:1px solid transparent }
.btn:hover{ filter:brightness(1.05) }

/* Grid */
.grid{ display:grid; gap:1rem; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)) }
.card{ background:var(--card); border:1px solid var(--border); border-radius:.5rem; overflow:hidden; transition:transform .2s ease, box-shadow .2s ease }
.card:hover{ transform:translateY(-2px); box-shadow:0 10px 20px rgba(0,0,0,.06) }
.card .p{ padding:1rem }
.price{ color:var(--price); font-weight:700 }

/* Filters */
.filters{ display:flex; gap:.5rem; padding:1rem 0; position:sticky; top:96px; background:var(--bg); z-index:40; border-bottom:1px solid var(--border) }
.filters select{ padding:.5rem; border:1px solid var(--border); border-radius:.375rem; background:var(--card); color:var(--fg) }

/* Footer (rich) */
.site-footer{ background:var(--footer-bg); color:var(--footer-fg); margin-top:4rem; border-top:1px solid rgba(0,0,0,.05) }
.site-footer .container{ width:min(var(--page-width),calc(100% - var(--page-gutter))); margin-inline:auto }
.footer-news{ display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:1.25rem 0; border-bottom:1px solid rgba(0,0,0,.06) }
.footer-news .label{ font-size:.85rem; letter-spacing:.04em; text-transform:uppercase; opacity:.9 }
.footer-news .input{ display:flex; align-items:center; gap:.6rem; flex:1; max-width:520px }
.footer-news input{ width:100%; border:0; border-bottom:2px solid currentColor; background:transparent; padding:.4rem 0; color:inherit; font-size:1.2rem; outline:none }
.footer-news input::placeholder{ color:#8a776d }
.footer-news .arrow{ border:0; background:transparent; color:#5a463a; font-size:1.2rem; cursor:pointer }
.footer-main{ display:grid; grid-template-columns: 1fr 3fr; gap:2rem; padding:1.25rem 0 }
.footer-social{ display:flex; align-items:center; gap:1rem; color:inherit }
.footer-columns{ display:grid; grid-template-columns: repeat(4, minmax(140px, 1fr)); gap:2rem }
.footer-columns h4{ font-size:.8rem; letter-spacing:.04em; text-transform:uppercase; margin:0 0 .75rem; color:inherit }
.footer-columns a{ display:block; color:inherit; text-decoration:none; padding:.3rem 0 }
.footer-columns a:hover{ text-decoration:underline }
.footer-locale{ padding:1rem 0; border-top:1px solid rgba(0,0,0,.06); display:flex; align-items:center; gap:.5rem }
.footer-locale select{ border:0; background:transparent; color:inherit; padding:.25rem 0 }
.footer-legal{ display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:1rem; padding:1rem 0; border-top:1px solid rgba(0,0,0,.06) }
.footer-legal .links a{ color:inherit; text-decoration:none; margin-right:1rem }
.footer-legal .links a:hover{ text-decoration:underline }
.footer-disclaimer{ font-size:.8rem; line-height:1.4; opacity:.9; color:#6a5a50; padding-bottom:1.5rem }
html.theme-dark .footer-disclaimer{ color:#b9a99f }

@media (max-width: 900px){
  .footer-main{ grid-template-columns: 1fr; }
  .footer-columns{ grid-template-columns: repeat(2, minmax(140px, 1fr)); gap:1.25rem }
  .footer-news{ flex-direction:column; align-items:flex-start }
  .footer-news .input{ max-width:100% }
}

/* Toast */
.toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:24px; background:rgba(31,41,55,.95); color:#fff; padding:.6rem .9rem; border-radius:.5rem; z-index:100; box-shadow:0 10px 25px rgba(0,0,0,.2); max-width:90vw }
.toast[hidden]{ display:none }

/* (search overlay removed) */

/* Accordion */
.accordion details{ background:var(--card); border:1px solid var(--border); border-radius:.5rem; padding: .75rem 1rem; margin:.5rem 0 }
.accordion summary{ cursor:pointer; font-weight:600 }

/* Transition overlay (wipe/fade) */
.transition-overlay{ position:fixed; inset:0; background:#fff; transform:translateY(100%); opacity:0; pointer-events:none; z-index:80 }
.transition-overlay.active{ animation:wipe .55s ease both }
@keyframes wipe{ 0%{ transform:translateY(100%); opacity:0 } 20%{ opacity:1 } 100%{ transform:translateY(0); opacity:1 } }

/* Responsive */
@media (max-width: 900px){
  .nav{ display:none }
  .hamburger{ display:inline-flex }
  .mobile-menu{ display:flex }
  /* Keep logo balanced on mobile */
  .brand img{ height:32px }
}

/* Spacing to avoid overlap of fixed header */
/* Ensure content pushes below the fixed topbar + header */
main.container{ padding-top: calc(var(--header-top, 12px) + var(--header-height, 96px) + 28px) }
.filters{ display:flex; gap:.5rem; padding:1rem 0; position:sticky; top: calc(var(--header-top, 12px) + var(--header-height, 96px) + 8px); background:var(--cream); z-index:40; border-bottom:1px solid #eee }

/* Evidence section (pixel-perfect) */
.evidence-section{ position:relative; margin:3rem 0 0 }
.evidence-inner{ position:relative; z-index:0; isolation:isolate; padding:3rem 0 }
/* Full-bleed background originating from the inner container */
.evidence-inner::before{ content:""; position:absolute; top:0; bottom:0; left:50%; width:100vw; transform:translateX(-50%); background:#f5efe5; z-index:-1 }
html.theme-dark .evidence-inner::before{ background:#1a1613 }
.evidence-grid{ display:grid; grid-template-columns: 1.2fr 1fr 1fr; gap:2.5rem; align-items:start }
.e-beans{ position:absolute; pointer-events:none; user-select:none; width:160px; height:auto; opacity:.95 }
.e-beans-left{ left:-10px; bottom:-22px; transform:rotate(-8deg) }
.e-beans-right{ right:14px; top:-18px; transform:rotate(10deg) }
.e-left{ grid-column:1/2 }
.e-title{ font-family: Georgia, "Times New Roman", Times, serif; font-weight:700; line-height:1.05; color:#3b2a1f; font-size: clamp(2rem, 5vw, 3.25rem); letter-spacing:.01em; margin: .25rem 0 1.25rem }
html.theme-dark .e-title{ color:#e7ddd4 }
.e-stat{ color:#3b2a1f }
.e-number{ font-family: Georgia, "Times New Roman", Times, serif; color:#f27d00; font-size: clamp(2.4rem, 6vw, 4rem); line-height:1; letter-spacing:.01em; margin-bottom:.4rem }
.e-sub{ margin:.15rem 0; font-size:1.1rem; color:#4b3a2f }
html.theme-dark .e-sub{ color:#d0c3b9 }
.e-stat-a{ grid-column:2/3 }
.e-stat-b{ grid-column:3/4 }
.e-mid{ grid-column:2/3; border-top:1px solid rgba(0,0,0,.18); padding-top:1rem; margin-top:.75rem }
html.theme-dark .e-mid{ border-top-color: rgba(255,255,255,.12) }
.e-badge{ display:inline-flex; align-items:center; gap:.6rem; background:#f6d9b6; border:1px solid #f0c89a; color:#3b2a1f; border-radius:.6rem; padding:.4rem .7rem; margin:.25rem 0 1rem }
html.theme-dark .e-badge{ background:#3a2c22; border-color:#4a382c; color:#e8ded6 }
.e-badge-num{ background:#f27d00; color:#fff; font-weight:700; border-radius:.45rem; padding:.2rem .45rem; font-size:.95rem }
.e-badge-label{ font-size:.95rem }
.e-desc{ color:#4b3a2f; font-size:1.05rem; line-height:1.5; max-width:38ch }
html.theme-dark .e-desc{ color:#d0c3b9 }
.e-reasons{ grid-column:3/4; border-top:1px solid rgba(0,0,0,.18); padding-top:1rem; margin-top:.75rem }
html.theme-dark .e-reasons{ border-top-color: rgba(255,255,255,.12) }
.e-reasons-title{ color:#3b2a1f; font-size:1.15rem; margin:.25rem 0 1rem; line-height:1.4 }
.e-list{ list-style:none; padding:0; margin:0; display:grid; gap:.65rem; color:#cf6500 }
.e-list li{ color:#cf6500; font-weight:600; display:flex; align-items:center; gap:.6rem; font-size:1.05rem }
.e-dot{ display:inline-grid; place-items:center; width:28px; height:28px; border-radius:999px; background:#fbe3c7; color:#cf6500; font-weight:700 }
.e-source{ grid-column:2/4; color:#6a5a50; font-size:.85rem; margin-top:1.25rem }
html.theme-dark .e-source{ color:#b9a99f }

/* Theme toggle button */
.theme-toggle{ background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18); color:#fff; padding:.35rem .55rem; border-radius:.5rem; cursor:pointer }
.theme-toggle:hover{ background:rgba(255,255,255,.2) }
html.theme-dark .site-header .container{ background:rgba(20,20,20,.82); border-color:rgba(255,255,255,.08) }
html.theme-dark .nav a{ color:#e5e7eb }
html.theme-dark .nav a.active, html.theme-dark .nav a:hover{ background:rgba(255,255,255,.12) }

@media (max-width: 980px){
  .evidence-grid{ grid-template-columns: 1fr; gap:1.5rem }
  .e-stat-a,.e-stat-b,.e-mid,.e-reasons,.e-source{ grid-column:auto }
  .e-left{ order:-1 }
  .e-title{ font-size: clamp(2rem, 8vw, 2.4rem) }
  .e-beans{ width:110px; opacity:.9 }
  .e-beans-left{ left:-8px; bottom:-16px }
  .e-beans-right{ right:6px; top:-12px }
}

/* Utility: muted text obeys theme */
.muted{ color:var(--muted-fg) }

/* Forms (contact, manual input) */
.form input, .form textarea{ width:100%; background:var(--card); color:var(--fg); border:1px solid var(--border); border-radius:.45rem; padding:.55rem .7rem }
.form textarea{ resize:vertical }

/* Icon button in dark surfaces */
html.theme-dark .icon-btn{ background:#1b1d21; border-color:#2a2f36; color:#e6e7eb }

/* Shop (Amazon-like serious yet harmonious) */
.shop-topbar{ display:flex; justify-content:space-between; align-items:center; gap:1rem; padding: .75rem 0; position:sticky; top: calc(var(--header-top, 12px) + var(--header-height, 96px)); background:var(--bg); z-index:39; border-bottom:1px solid var(--border) }
.shop-topbar .chips{ display:flex; flex-wrap:wrap; gap:.5rem }
.chip{ background:var(--card); color:var(--fg); border:1px solid var(--border); border-radius:999px; padding:.35rem .75rem; font-size:.9rem; cursor:pointer }
.chip.active{ background:var(--accent); border-color:var(--accent); color:var(--accent-contrast) }
.shop-topbar .actions{ display:flex; align-items:center; gap:.75rem }
.shop-topbar .filters-toggle{ background:var(--card); border:1px solid var(--border); padding:.45rem .7rem; border-radius:.375rem; cursor:pointer }
.shop-topbar .sort select{ padding:.4rem .55rem; border:1px solid var(--border); background:var(--card); color:var(--fg); border-radius:.375rem }

.shop-layout{ display:grid; grid-template-columns: 280px 1fr; gap:1.25rem; padding:1rem 0 }
.shop-sidebar{ position:sticky; top: calc(var(--header-top, 12px) + var(--header-height, 96px) + 42px); align-self:start; display:flex; flex-direction:column; gap:1rem }
.filter-group{ background:var(--card); border:1px solid var(--border); border-radius:.5rem; padding:.9rem }
.filter-title{ font-weight:600; margin-bottom:.5rem }
.filter-list{ display:grid; gap:.35rem }
.filter-list label{ display:flex; align-items:center; gap:.5rem; font-size:.95rem; color:var(--fg) }
.price-inputs{ display:flex; align-items:center; gap:.5rem }
.price-inputs input{ width:100%; padding:.4rem .5rem; border:1px solid var(--border); border-radius:.375rem; background:var(--card); color:var(--fg) }
.filter-actions{ display:flex; justify-content:flex-end }
.btn.small{ padding:.4rem .6rem; font-size:.9rem }
.btn.outline{ background:transparent; color:var(--fg); border:1px solid var(--border) }

.shop-content .applied-filters{ display:flex; flex-wrap:wrap; gap:.5rem; margin-bottom:.75rem }
.pill{ background:var(--card); color:var(--fg); border:1px solid var(--border); border-radius:999px; padding:.25rem .6rem; font-size:.85rem }

.pagination{ display:flex; justify-content:center; padding:1rem 0 }
.pager{ display:flex; align-items:center; gap:.75rem; background:var(--card); border:1px solid var(--border); border-radius:.5rem; padding:.35rem .6rem }
.pager button{ background:var(--card); border:1px solid var(--border); border-radius:.375rem; padding:.35rem .6rem; cursor:pointer; color:var(--fg) }
.pager button[disabled]{ opacity:.55; cursor:not-allowed }

@media (max-width: 980px){
  .shop-layout{ grid-template-columns: 1fr }
  .shop-sidebar{ position:static; display:none }
  .shop-sidebar.open{ display:block }
  .shop-topbar{ position:sticky; top: calc(var(--header-top, 12px) + var(--header-height, 96px)); z-index:50 }
}

/* Uniform sizing for shop cards */
.shop-content .grid{ align-items: stretch }
.shop-content .card{ display:flex; flex-direction:column; height:100%; min-height:420px }
.shop-content .card > img{ width:100%; aspect-ratio:1 / 1; object-fit:cover }
.shop-content .card .p{ display:flex; flex-direction:column; gap:.35rem; flex:1 }
.shop-content .card h3{ font-size:1rem; line-height:1.35; margin:.15rem 0 .25rem; display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; min-height: calc(1.35em * 2) }
.shop-content .card .muted{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.shop-content .card .price{ margin-top:auto }

/* (compact mode removed) */
