<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tienda Â· DobleYo</title>
  <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
  <meta name="theme-color" content="#251a14">
  
  <script>
  tailwind.config = { theme: { extend: { colors:{ coffee:'#251a14', cream:'#f7f3ef', accent:'#c67b4e', ink:'#1f2937' }, fontFamily:{ sans:['Lora','ui-serif','Georgia','Cambria','Times New Roman','Times','serif'] } } } }
  </script>
  <link rel="stylesheet" href="assets/css/styles.css">
  <meta name="description" content="Tienda DobleYo: compra cafÃ©s y accesorios." />
  <meta name="robots" content="index,follow" />
  <meta property="og:title" content="Tienda Â· DobleYo" />
  <meta property="og:description" content="Compra cafÃ©s de especialidad y accesorios." />
</head>
<body class="font-sans bg-cream text-ink">
  <div class="topbar" id="topbar"><div class="container"><span>Novedad: EnvÃ­os nacionales gratis desde $120.000</span><button class="topbar-close" id="topbarClose">Ã—</button></div></div>
  <div class="transition-overlay" id="transitionOverlay" aria-hidden="true"></div>
  <header class="site-header" id="siteHeader">
    <div class="container">
      <div class="nav-beans" aria-hidden="true"></div>
  <a class="brand" href="index.html" data-link><img src="assets/logo.png" alt="DobleYo" height="56"/></a>
      <nav class="nav">
        <a href="index.html" data-link>Inicio</a>
        <a class="active" href="tienda.html" data-link>Tienda</a>
        
        <a href="nosotros.html" data-link>Nosotros</a>
        <a href="blog.html" data-link>Blog</a>
        <a href="trazabilidad.html" data-link>Trazabilidad</a>
        <a href="contacto.html" data-link>Contacto</a>
      </nav>
      <div class="actions">
        <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema" title="Cambiar tema">ðŸŒ™</button>
        <a href="carrito.html" class="icon-btn" data-link aria-label="Ver carrito">ðŸ›’<span class="badge" id="cartCount">0</span></a>
        <a href="login.html" class="icon-btn user-icon" data-link aria-label="Iniciar sesiÃ³n" title="Iniciar sesiÃ³n">
          <!-- Small user silhouette SVG (decorative) -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
            <path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zM3 20c0-2.761 4.477-5 9-5s9 2.239 9 5v1H3v-1z" fill="currentColor"/>
          </svg>
        </a>
        <button id="menuBtn" class="hamburger" aria-label="MenÃº">â˜°</button>
      </div>
    </div>
      <div class="mobile-menu" id="mobileMenu" hidden>
      <a href="index.html" data-link>Inicio</a>
      <a class="active" href="tienda.html" data-link>Tienda</a>
      
      <a href="nosotros.html" data-link>Nosotros</a>
      <a href="blog.html" data-link>Blog</a>
      <a href="trazabilidad.html" data-link>Trazabilidad</a>
      <a href="contacto.html" data-link>Contacto</a>
      <a href="login.html" data-link class="icon-btn user-icon" aria-label="Iniciar sesiÃ³n" title="Iniciar sesiÃ³n">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
          <path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zM3 20c0-2.761 4.477-5 9-5s9 2.239 9 5v1H3v-1z" fill="currentColor"/>
        </svg>
      </a>
    </div>
  </header>

  <main class="container">
    <!-- Banner promocional: debajo de la navbar y encima de los filtros -->
    <section class="promo-banner" aria-label="PromociÃ³n">
      <div class="promo-inner">
        <div class="promo-media" role="img" aria-label="Imagen promocional">
          <img src="assets/img/banner/shop.svg" alt="Imagen promocional DobleYo" loading="lazy">
        </div>
        <div class="promo-overlay" aria-hidden="false">
          <div class="promo-text">
            <h2 class="promo-title">Shop All</h2>
            <p class="promo-sub">DobleYo Cafe Â· SelecciÃ³n de cafÃ©s y accesorios. Calidad de especialidad, directo al consumidor.</p>
          </div>
        </div>
      </div>
    </section>
  <!-- Filtros horizontales superiores y orden -->
    <section class="shop-topbar" aria-label="Filtros superiores">
      <div class="chips" id="topChips" role="toolbar" aria-label="Filtros rÃ¡pidos">
        <button class="chip" data-flag="fast">Entrega rÃ¡pida</button>
        <button class="chip" data-flag="deal">En oferta</button>
        <button class="chip" data-flag="new">Novedades</button>
        <button class="chip" data-flag="bestseller">MÃ¡s vendidos</button>
      </div>
      <div class="actions">
        <button class="filters-toggle" id="filtersToggle" aria-expanded="false">Filtros</button>
        <label class="sort">
          <span>Ordenar por:</span>
          <select id="shopSort" aria-label="Ordenar resultados">
            <option value="relevance">Relevancia</option>
            <option value="price-asc">Precio: de menor a mayor</option>
            <option value="price-desc">Precio: de mayor a menor</option>
            <option value="rating-desc">Mejor calificados</option>
          </select>
        </label>
      </div>
    </section>

    <section class="shop-layout" aria-label="Resultados de tienda">
  <!-- Filtros verticales lateral -->
      <aside class="shop-sidebar" id="shopSidebar">
        <div class="filter-group">
          <div class="filter-title">CategorÃ­as</div>
          <div class="filter-list" id="catList">
            <!-- llenado por script -->
          </div>
        </div>
        <div class="filter-group">
          <div class="filter-title">Origen</div>
          <div class="filter-list" id="originList"></div>
        </div>
        <div class="filter-group">
          <div class="filter-title">Proceso</div>
          <div class="filter-list" id="processList"></div>
        </div>
        <div class="filter-group">
          <div class="filter-title">Tueste</div>
          <div class="filter-list" id="roastList"></div>
        </div>
        <div class="filter-group">
          <div class="filter-title">Precio</div>
          <div class="price-inputs">
            <input type="number" id="priceMin" placeholder="MÃ­n" min="0" step="1000" aria-label="Precio mÃ­nimo">
            <span>â€“</span>
            <input type="number" id="priceMax" placeholder="MÃ¡x" min="0" step="1000" aria-label="Precio mÃ¡ximo">
          </div>
          <button class="btn small" id="applyPrice">Aplicar</button>
        </div>
        <div class="filter-group">
          <div class="filter-title">CalificaciÃ³n</div>
          <div class="filter-list">
            <label><input type="radio" name="rating" value="4"> 4â˜… y mÃ¡s</label>
            <label><input type="radio" name="rating" value="3"> 3â˜… y mÃ¡s</label>
            <label><input type="radio" name="rating" value="2"> 2â˜… y mÃ¡s</label>
            <label><input type="radio" name="rating" value=""> Cualquiera</label>
          </div>
        </div>
        <div class="filter-actions">
          <button class="btn outline" id="clearFilters">Limpiar filtros</button>
        </div>
      </aside>

  <!-- Area de resultados -->
      <section class="shop-content">
        <div class="applied-filters" id="appliedFilters"></div>
        <div class="grid" id="shopResults"></div>
        <div class="pagination" id="shopPagination"></div>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-news">
        <div class="label">10% de descuento en tu primera compra</div>
        <div class="input">
          <input placeholder="Tu correo electrÃ³nico" aria-label="Correo electrÃ³nico"/>
          <button class="arrow" aria-label="Suscribirse">â†’</button>
        </div>
      </div>
      <div class="footer-main">
        <div class="footer-social">
          <img src="assets/logo.png" alt="DobleYo" height="14" style="display:block; margin-bottom:.25rem">
          <a href="#" aria-label="Instagram">Instagram</a>
          <a href="#" aria-label="Facebook">Facebook</a>
        </div>
        <div class="footer-columns">
          <div>
            <h4>Tienda</h4>
            <a href="tienda.html" data-link>CafÃ©s</a>
            <a href="#">Accesorios</a>
            <a href="tienda.html" data-link>Ver todo</a>
          </div>
          <div>
            <h4>Aprende</h4>
            <a href="nosotros.html" data-link>Sobre nosotros</a>
            <a href="blog.html" data-link>Blog</a>
            <a href="#">GuÃ­as</a>
          </div>
          <div>
            <h4>Soporte</h4>
            <a href="contacto.html" data-link>ContÃ¡ctanos</a>
            <a href="#">EnvÃ­os y devoluciones</a>
            <a href="#">Cuenta</a>
          </div>
          <div>
            <h4>Consultas</h4>
            <a href="#">Zona de partners</a>
            <a href="#">Programa de afiliados</a>
            <a href="#">Mayoristas</a>
            <a href="#">Recomienda un amigo</a>
          </div>
        </div>
      </div>
      
      <div class="footer-legal">
        <div>Â© <span id="year"></span> DobleYo. Todos los derechos reservados.</div>
        <div class="links">
          <a href="#">PolÃ­tica de privacidad</a>
          <a href="#">TÃ©rminos y condiciones</a>
          <a href="#">Accesibilidad</a>
        </div>
      </div>
      <div class="footer-disclaimer">
        Las declaraciones hechas en este sitio no son evaluadas por entidades regulatorias. Los productos ofrecidos no estÃ¡n destinados a diagnosticar, tratar o curar enfermedades. La informaciÃ³n provista no reemplaza una consulta con tu profesional de salud y no debe interpretarse como consejo mÃ©dico individual.
      </div>
    </div>
  </footer>
  <script src="assets/js/app.js" defer></script>
  <script src="assets/js/cart.js" defer></script>
  <script>
    (function(){
      const $ = (s, r=document) => r.querySelector(s);
      const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
  // Dataset: serio y armonioso, mezcla de cafes y accesorios
      const products = [
  { id:'cf-sierra', name:'Sierra Nevada', category:'CafÃ©s', origin:'Sierra Nevada', process:'Lavado', roast:'Medio', price:42000, rating:4.6, deal:true, bestseller:true, fast:true, image:'assets/img/products/sierra.svg' },
  { id:'cf-huila', name:'Huila', category:'CafÃ©s', origin:'Huila', process:'Honey', roast:'Claro', price:45000, rating:4.7, new:true, fast:true, image:'assets/img/products/huila.svg' },
  { id:'cf-nar', name:'NariÃ±o', category:'CafÃ©s', origin:'NariÃ±o', process:'Natural', roast:'Oscuro', price:48000, rating:4.5, image:'assets/img/products/narino.svg' },
  { id:'acc-molinillo', name:'Molinillo Manual', category:'Accesorios', price:199900, rating:4.3, deal:true, fast:true, image:'assets/img/products/molinillo.svg' },
  { id:'acc-chemex', name:'Chemex 6 tazas', category:'Accesorios', price:269900, rating:4.9, new:true, image:'assets/img/products/chemex.svg' }
      ];

  // Elementos
      const resultsEl = $('#shopResults');
      const pagEl = $('#shopPagination');
      const appliedEl = $('#appliedFilters');
      const chipsEl = $('#topChips');
      const sortSel = $('#shopSort');
      const filtersToggle = $('#filtersToggle');
      const sidebar = $('#shopSidebar');
      const clearBtn = $('#clearFilters');
      const priceMin = $('#priceMin');
      const priceMax = $('#priceMax');
      const applyPrice = $('#applyPrice');

  // Construir listas de barra lateral
      function uniq(arr){ return Array.from(new Set(arr.filter(Boolean))); }
      function buildChecks(container, values, name){
        container.innerHTML = values.map(v=>`<label><input type="checkbox" name="${name}" value="${v}"> ${v}</label>`).join('');
      }
      const cats = uniq(products.map(p=>p.category)).sort();
      const origins = uniq(products.map(p=>p.origin)).sort();
      const procs = uniq(products.map(p=>p.process)).sort();
      const roasts = uniq(products.map(p=>p.roast)).sort();
      buildChecks($('#catList'), cats, 'cat');
      buildChecks($('#originList'), origins, 'origin');
      buildChecks($('#processList'), procs, 'process');
      buildChecks($('#roastList'), roasts, 'roast');

  // Estado
      let state = {
        flags: { fast:false, deal:false, new:false, bestseller:false },
        cats: new Set(), origins: new Set(), procs: new Set(), roasts: new Set(),
        price: { min:'', max:'' }, ratingMin:'', sort:'relevance', page:1, pageSize:12
      };

  // Manejadores
      chipsEl.addEventListener('click', (e)=>{
        const btn = e.target.closest('.chip'); if (!btn) return;
        const f = btn.dataset.flag; state.flags[f] = !state.flags[f];
        btn.classList.toggle('active', state.flags[f]);
        state.page = 1; render();
      });
      sortSel.addEventListener('change', ()=>{ state.sort = sortSel.value; state.page = 1; render(); });
      filtersToggle.addEventListener('click', ()=>{
        const open = sidebar.classList.toggle('open');
        filtersToggle.setAttribute('aria-expanded', String(open));
      });
      clearBtn.addEventListener('click', ()=>{ state = { ...state, flags:{fast:false,deal:false,new:false,bestseller:false}, cats:new Set(), origins:new Set(), procs:new Set(), roasts:new Set(), price:{min:'',max:''}, ratingMin:'', sort:'relevance', page:1 };
        $$('#shopSidebar input[type="checkbox"]').forEach(i=> i.checked=false);
        $$('#shopSidebar input[type="radio"][name="rating"]').forEach(i=> i.checked = i.value==='');
        priceMin.value=''; priceMax.value='';
        $$('.chip', chipsEl).forEach(c=> c.classList.remove('active'));
        render();
      });
      applyPrice.addEventListener('click', ()=>{ state.price.min = priceMin.value; state.price.max = priceMax.value; state.page=1; render(); });
      $('#shopSidebar').addEventListener('change', (e)=>{
        const t = e.target; if (!(t instanceof HTMLInputElement)) return;
        if (t.type==='checkbox'){
          const set = t.name==='cat'? state.cats : t.name==='origin'? state.origins : t.name==='process'? state.procs : state.roasts;
          t.checked ? set.add(t.value) : set.delete(t.value);
        } else if (t.name==='rating') {
          state.ratingMin = t.value;
        }
        state.page = 1; render();
      });

      function applyFilters(list){
        let out = list.slice();
  // banderas
        Object.entries(state.flags).forEach(([k, on])=>{ if (on) out = out.filter(p=> p[k]); });
  // categorias/atributos
        if (state.cats.size) out = out.filter(p=> state.cats.has(p.category));
        if (state.origins.size) out = out.filter(p=> state.origins.has(p.origin));
        if (state.procs.size) out = out.filter(p=> state.procs.has(p.process));
        if (state.roasts.size) out = out.filter(p=> state.roasts.has(p.roast));
  // precio
        const min = parseInt(state.price.min||'0',10); const max = parseInt(state.price.max||'0',10);
        if (state.price.min) out = out.filter(p=> p.price >= min);
        if (state.price.max) out = out.filter(p=> p.price <= max);
  // calificacion
        if (state.ratingMin) out = out.filter(p=> (p.rating||0) >= Number(state.ratingMin));
        return out;
      }
      function sortList(list){
        const s = state.sort;
        if (s==='price-asc') return list.sort((a,b)=> a.price - b.price);
        if (s==='price-desc') return list.sort((a,b)=> b.price - a.price);
        if (s==='rating-desc') return list.sort((a,b)=> (b.rating||0)-(a.rating||0));
  // relevancia: prioriza banderas/nuevo/mas vendidos y luego calificacion
        return list.sort((a,b)=> ((b.bestseller?1:0)+(b.new?1:0)+(b.deal?1:0)+(b.rating||0)/5) - ((a.bestseller?1:0)+(a.new?1:0)+(a.deal?1:0)+(a.rating||0)/5));
      }
      function paginate(list){
        const start = (state.page-1)*state.pageSize;
        return list.slice(start, start+state.pageSize);
      }
      function renderApplied(){
        const pills = [];
        Object.entries(state.flags).forEach(([k,on])=>{ if(on) pills.push(labelFlag(k)); });
        state.cats.forEach(v=> pills.push(v));
        state.origins.forEach(v=> pills.push(v));
        state.procs.forEach(v=> pills.push(v));
        state.roasts.forEach(v=> pills.push(v));
        if (state.price.min) pills.push(`â‰¥ $${Number(state.price.min).toLocaleString('es-CO')}`);
        if (state.price.max) pills.push(`â‰¤ $${Number(state.price.max).toLocaleString('es-CO')}`);
        if (state.ratingMin) pills.push(`${state.ratingMin}â˜…+`);
        appliedEl.innerHTML = pills.map(t=> `<span class="pill">${t}</span>`).join('');
      }
      function labelFlag(f){ return f==='fast'?'Entrega rÃ¡pida': f==='deal'?'En oferta': f==='new'?'Novedades':'MÃ¡s vendidos'; }
      function card(p){
        return `
        <article class="card">
          <img src="${p.image}" alt="${escapeHtml(p.name)}">
          <div class="p">
            <div class="muted" style="font-size:.85rem">${p.category}${p.origin? ' Â· '+p.origin:''}</div>
            <h3>${escapeHtml(p.name)}</h3>
            <div class="muted" style="font-size:.85rem">${p.process||''}${p.process&&p.roast?' Â· ':''}${p.roast||''}</div>
            <div class="price">$${p.price.toLocaleString('es-CO')}</div>
            <div style="margin-top:.35rem; display:flex; gap:.5rem">
              <button class="btn small" data-add="${p.id}">Agregar</button>
              <a class="btn outline small" href="carrito.html" data-link>Ver carrito</a>
            </div>
          </div>
        </article>`;
      }
      function render(){
        const filtered = applyFilters(products.slice());
        const sorted = sortList(filtered);
        const pageItems = paginate(sorted);
        resultsEl.innerHTML = pageItems.map(card).join('');
        // manejar clicks de agregar
        resultsEl.onclick = (e)=>{
          const btn = e.target.closest('button[data-add]'); if (!btn) return;
          const id = btn.getAttribute('data-add');
          const prod = products.find(p=>p.id===id); if (!prod) return;
          window.Cart && window.Cart.addToCart({ id:prod.id, name:prod.name, price:prod.price, image:prod.image, qty:1 });
        };
        renderApplied();
  // paginacion
        const total = filtered.length; const pages = Math.max(1, Math.ceil(total/state.pageSize));
        pagEl.innerHTML = `
          <div class="pager">
            <button ${state.page<=1?'disabled':''} data-act="prev">Anterior</button>
            <span>PÃ¡gina ${state.page} de ${pages}</span>
            <button ${state.page>=pages?'disabled':''} data-act="next">Siguiente</button>
          </div>`;
        pagEl.onclick = (e)=>{
          const btn = e.target.closest('button'); if (!btn) return;
          const act = btn.dataset.act;
          if (act==='prev' && state.page>1){ state.page--; render(); }
          if (act==='next' && state.page<pages){ state.page++; render(); }
        };
      }
      function escapeHtml(str){ return (str||'').replace(/[&<>"]+/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[s])); }
  // inicio por defecto
      $$('#shopSidebar input[type="radio"][name="rating"]').find(r=>r.value==='').checked = true;
      render();
    })();
  </script>
</body>
</html>