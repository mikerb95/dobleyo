<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Carrito ¬∑ DobleYo</title>
  <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
  <meta name="theme-color" content="#251a14">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors:{ coffee:'#251a14', cream:'#f7f3ef', accent:'#c67b4e', ink:'#1f2937' }, fontFamily:{ sans:['Inter','ui-sans-serif','system-ui','-apple-system','Segoe UI','Roboto','Helvetica','Arial'] } } } }
  </script>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="font-sans bg-cream text-ink">
  <div class="topbar" id="topbar"><div class="container"><span>Novedad: Env√≠os nacionales gratis desde $120.000</span><button class="topbar-close" id="topbarClose">√ó</button></div></div>
  <div class="transition-overlay" id="transitionOverlay" aria-hidden="true"></div>
  <header class="site-header" id="siteHeader">
    <div class="container">
  <a class="brand" href="index.html" data-link><img src="assets/logo.png" alt="DobleYo" height="28"/></a>
      <nav class="nav">
        <a href="index.html" data-link>Inicio</a>
        <a href="tienda.html" data-link>Tienda</a>
        
        <a href="nosotros.html" data-link>Nosotros</a>
        <a href="faq.html" data-link>FAQ</a>
        <a href="contacto.html" data-link>Contacto</a>
        <a href="cuenta.html" data-link>Mi cuenta</a>
      </nav>
      <div class="actions">
        <button id="searchBtn" class="icon-btn">üîç</button>
        <a href="carrito.html" class="icon-btn active">üõí<span class="badge" id="cartCount">0</span></a>
        <a href="login.html" class="icon-btn" data-link>Iniciar sesi√≥n</a>
        <button id="menuBtn" class="hamburger">‚ò∞</button>
      </div>
    </div>
    <div class="mobile-menu" id="mobileMenu" hidden>
      <a href="index.html" data-link>Inicio</a>
      <a href="tienda.html" data-link>Tienda</a>
      
      <a href="nosotros.html" data-link>Nosotros</a>
      <a href="faq.html" data-link>FAQ</a>
      <a href="contacto.html" data-link>Contacto</a>
      <a href="cuenta.html" data-link>Mi cuenta</a>
      <a href="login.html" data-link>Iniciar sesi√≥n</a>
    </div>
  </header>

  <main class="container">
    <section>
      <h1>Tu carrito</h1>
      <div id="cartList"></div>
      <div class="cart-summary">
        <span>Total: <strong id="cartTotal">$0</strong></span>
        <button class="btn" id="checkoutBtn">Finalizar compra</button>
      </div>
    </section>
  </main>

  <footer class="site-footer"><div class="container"><p>¬© <span id="year"></span> DobleYo</p></div></footer>
  <script src="assets/js/app.js" defer></script>
  <script src="assets/js/cart.js" defer></script>
  <script>
    (function(){
      function ready(fn){ if (document.readyState !== 'loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }
      function whenCart(fn){ if (window.Cart) fn(); else setTimeout(()=>whenCart(fn), 30); }
      ready(()=> whenCart(function(){
        const listEl = document.getElementById('cartList');
        const totalEl = document.getElementById('cartTotal');
        function render(){
          const cart = window.Cart.getCart();
          if (!cart.length){ listEl.innerHTML = '<p class="muted">Tu carrito esta vacio.</p>'; totalEl.textContent = '$0'; return; }
          listEl.innerHTML = cart.map(p=> `
            <article class="card" style="margin:.5rem 0">
              <div class="p" style="display:grid; grid-template-columns: 64px 1fr auto; gap:.75rem; align-items:center">
                <img src="${p.image}" alt="${(p.name||'').replace(/</g,'&lt;')}">
                <div>
                  <div>${(p.name||'')}</div>
                  <div class="muted">$${(p.price||0).toLocaleString('es-CO')}</div>
                </div>
                <div style="display:flex; gap:.35rem; align-items:center">
                  <input type="number" min="1" max="99" value="${p.qty||1}" data-id="${p.id}" class="qty" style="width:64px">
                  <button class="icon-btn rm" data-id="${p.id}">Quitar</button>
                </div>
              </div>
            </article>`).join('');
          const tot = window.Cart.subtotal(); totalEl.textContent = '$'+tot.toLocaleString('es-CO');
          listEl.onclick = (e)=>{
            const rm = e.target.closest('.rm'); if (rm){ window.Cart.removeFromCart(rm.dataset.id); render(); return; }
          };
          listEl.onchange = (e)=>{
            const q = e.target.closest('.qty'); if (q){ window.Cart.updateQty(q.dataset.id, q.value); render(); }
          };
        }
        render();
        document.getElementById('checkoutBtn').addEventListener('click', ()=>{ location.href='checkout.html'; });
      }));
    })();
  </script>
</body>
</html>
