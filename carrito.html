<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Carrito ¬∑ DobleYo</title>
  <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
  <meta name="theme-color" content="#251a14">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors:{ coffee:'#251a14', cream:'#f7f3ef', accent:'#c67b4e', ink:'#1f2937' }, fontFamily:{ sans:['Inter','ui-sans-serif','system-ui','-apple-system','Segoe UI','Roboto','Helvetica','Arial'] } } } }
  </script>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="font-sans bg-cream text-ink">
  <div class="topbar" id="topbar"><div class="container"><span>Novedad: Env√≠os nacionales gratis desde $120.000</span><button class="topbar-close" id="topbarClose">√ó</button></div></div>
  <div class="transition-overlay" id="transitionOverlay" aria-hidden="true"></div>
  <header class="site-header" id="siteHeader">
    <div class="container">
  <a class="brand" href="index.html" data-link><img src="assets/logo.png" alt="DobleYo" height="56"/></a>
      <nav class="nav">
        <a href="index.html" data-link>Inicio</a>
        <a href="tienda.html" data-link>Tienda</a>
        <a href="faq.html" data-link>FAQ</a>
  <!-- 'Mi cuenta' removed from navbar per request -->
      </nav>
      <div class="actions">
        <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema" title="Cambiar tema">üåô</button>
        <button id="searchBtn" class="icon-btn">üîç</button>
        <a href="carrito.html" class="icon-btn active">üõí<span class="badge" id="cartCount">0</span></a>
        <a href="login.html" class="icon-btn user-btn" aria-label="Iniciar sesi√≥n" data-link>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm0 2c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z" fill="currentColor"/></svg>
        </a>
        <button id="menuBtn" class="hamburger">‚ò∞</button>
      </div>
    </div>
    <div class="mobile-menu" id="mobileMenu" hidden>
      <a href="index.html" data-link>Inicio</a>
      <a href="tienda.html" data-link>Tienda</a>
      <a href="faq.html" data-link>FAQ</a>
  <!-- 'Mi cuenta' removed from mobile menu -->
      <a href="login.html" class="icon-btn user-btn" aria-label="Iniciar sesi√≥n" data-link>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm0 2c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z" fill="currentColor"/></svg>
      </a>
    </div>
  </header>

  <main class="container">
    <section>
      <h1>Tu carrito</h1>
      <div id="cartList"></div>
      <div class="cart-summary">
        <span>Total: <strong id="cartTotal">$0</strong></span>
        <button class="btn" id="checkoutBtn">Finalizar compra</button>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-news">
        <div class="label">10% de descuento en tu primera compra</div>
        <div class="input">
          <input placeholder="Tu correo electr√≥nico" aria-label="Correo electr√≥nico"/>
          <button class="arrow" aria-label="Suscribirse">‚Üí</button>
        </div>
      </div>
      <div class="footer-main">
        <div class="footer-social">
          <img src="assets/logo.png" alt="DobleYo Caf√©">
          <a href="#" aria-label="Instagram">Instagram</a>
          <a href="#" aria-label="Facebook">Facebook</a>
        </div>
        <div class="footer-columns">
          <div>
            <h4>Tienda</h4>
            <a href="tienda.html" data-link>Caf√©s</a>
            <a href="#">Accesorios</a>
            <a href="tienda.html" data-link>Ver todo</a>
          </div>
          <div>
            <h4>Aprende</h4>
            <a href="nosotros.html" data-link>Sobre nosotros</a>
            <a href="blog.html" data-link>Blog</a>
            <a href="#">Gu√≠as</a>
          </div>
          <div>
            <h4>Soporte</h4>
            <a href="contacto.html" data-link>Cont√°ctanos</a>
            <a href="#">Env√≠os y devoluciones</a>
            <a href="#">Cuenta</a>
          </div>
          <div>
            <h4>Consultas</h4>
            <a href="#">Zona de partners</a>
            <a href="#">Programa de afiliados</a>
            <a href="#">Mayoristas</a>
            <a href="#">Recomienda un amigo</a>
          </div>
        </div>
      </div>
      
      <div class="footer-legal">
        <div>¬© <span id="year"></span> DobleYo Caf√©. Todos los derechos reservados.</div>
        <div class="links">
          <a href="#">Pol√≠tica de privacidad</a>
          <a href="#">T√©rminos y condiciones</a>
          <a href="#">Accesibilidad</a>
        </div>
      </div>
      <div class="footer-disclaimer">
        Las declaraciones hechas en este sitio no son evaluadas por entidades regulatorias. Los productos ofrecidos no est√°n destinados a diagnosticar, tratar o curar enfermedades. La informaci√≥n provista no reemplaza una consulta con tu profesional de salud y no debe interpretarse como consejo m√©dico individual.
      </div>
    </div>
  </footer>
  <script src="assets/js/app.js" defer></script>
  <script src="assets/js/cart.js" defer></script>
  <script>
    (function(){
      function ready(fn){ if (document.readyState !== 'loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }
      function whenCart(fn){ if (window.Cart) fn(); else setTimeout(()=>whenCart(fn), 30); }
      ready(()=> whenCart(function(){
        const listEl = document.getElementById('cartList');
        const totalEl = document.getElementById('cartTotal');
        function render(){
          const cart = window.Cart.getCart();
          if (!cart.length){ listEl.innerHTML = '<p class="muted">Tu carrito esta vacio.</p>'; totalEl.textContent = '$0'; return; }
          listEl.innerHTML = cart.map(p=> `
            <article class="card cart-item">
              <div class="p cart-item-grid">
                <img src="${p.image}" alt="${(p.name||'').replace(/</g,'&lt;')}">
                <div>
                  <div>${(p.name||'')}</div>
                  <div class="muted">$${(p.price||0).toLocaleString('es-CO')}</div>
                </div>
                <div class="cart-item-controls">
                  <div class="cart-qty" data-id="${p.id}">
                    <input type="number" min="1" max="99" value="${p.qty||1}" data-id="${p.id}" class="qty qty-input" inputmode="numeric" pattern="[0-9]*" aria-label="Cantidad">
                    <div class="qty-steppers" role="group" aria-label="Cambiar cantidad">
                      <button type="button" class="qty-step qty-up" data-id="${p.id}" data-dir="up" aria-label="Aumentar cantidad" title="Aumentar"><span aria-hidden="true">‚Üë</span></button>
                      <button type="button" class="qty-step qty-down" data-id="${p.id}" data-dir="down" aria-label="Disminuir cantidad" title="Disminuir"><span aria-hidden="true">‚Üì</span></button>
                    </div>
                  </div>
                  <button class="icon-btn rm" data-id="${p.id}">Quitar</button>
                </div>
              </div>
            </article>`).join('');
          const tot = window.Cart.subtotal(); totalEl.textContent = '$'+tot.toLocaleString('es-CO');
          listEl.onclick = (e)=>{
            const rm = e.target.closest('.rm'); if (rm){ window.Cart.removeFromCart(rm.dataset.id); render(); return; }
            const step = e.target.closest('.qty-step');
            if (step){
              const id = step.dataset.id;
              const input = listEl.querySelector(`input.qty[data-id="${id}"]`);
              if (!input) return;
              const current = parseInt(input.value, 10) || 1;
              const delta = step.dataset.dir === 'down' ? -1 : 1;
              const next = Math.min(99, Math.max(1, current + delta));
              if (next !== current){ window.Cart.updateQty(id, next); render(); }
              return;
            }
          };
          listEl.onchange = (e)=>{
            const q = e.target.closest('.qty');
            if (q){
              const parsed = parseInt(q.value, 10);
              const next = Math.min(99, Math.max(1, isNaN(parsed) ? 1 : parsed));
              window.Cart.updateQty(q.dataset.id, next);
              render();
            }
          };
        }
        render();
        document.getElementById('checkoutBtn').addEventListener('click', ()=>{ location.href='checkout.html'; });
      }));
    })();
  </script>
</body>
</html>
